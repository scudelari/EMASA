<Window
    x:Class="Emasa_Optimizer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ap="clr-namespace:BaseWPFLibrary.AttachedProperties;assembly=BaseWPFLibrary"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:e="clr-namespace:BaseWPFLibrary;assembly=BaseWPFLibrary"
    xmlns:eb="clr-namespace:BaseWPFLibrary.Bindings;assembly=BaseWPFLibrary"
    xmlns:ec="clr-namespace:BaseWPFLibrary.Converters;assembly=BaseWPFLibrary"
    xmlns:ev="clr-namespace:BaseWPFLibrary.ValidationRules;assembly=BaseWPFLibrary"
    xmlns:fea="clr-namespace:Emasa_Optimizer.FEA"
    xmlns:h="clr-namespace:Emasa_Optimizer.WpfResources"
    xmlns:local="clr-namespace:Emasa_Optimizer"
    xmlns:localParamDefinitions="clr-namespace:Emasa_Optimizer.Opt.ParamDefinitions"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:nupdown="clr-namespace:NumericUpDownLib;assembly=NumericUpDownLib"
    xmlns:system="clr-namespace:System;assembly=mscorlib"
    Title="Emasa Geometry Optimizer"
    Width="1500"
    Height="950"
    Initialized="Window_Initialized"
    ResizeMode="NoResize"
    UseLayoutRounding="True"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="WpfResources/GeneralTemplates.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <ec:InverseBooleanConverter x:Key="InverseBooleanConverter" />
            <h:WpfImageCaptureViewDirectionEnumFlagsValueConverter x:Key="ImageValConv" />
        </ResourceDictionary>
    </Window.Resources>
    <Grid x:Name="MainGrid">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <GroupBox Header="Grasshopper Algorithm" Style="{StaticResource Blue_GroupBox}">
                <Grid SnapsToDevicePixels="True">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Border
                        Margin="20,0"
                        HorizontalAlignment="Stretch"
                        SnapsToDevicePixels="True"
                        Style="{StaticResource BottomOnly_Border}">
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontFamily="Courier New"
                            FontSize="20"
                            Text="{Binding SolveMgr.Gh_Alg.WpfGrasshopperName, Mode=OneWay, FallbackValue='Grasshopper File Name'}" />
                    </Border>
                    <TextBlock
                        Grid.Row="1"
                        Margin="20,5,20,0"
                        HorizontalAlignment="Stretch"
                        FontFamily="Courier New"
                        Style="{StaticResource Explanation_TextBlock}"
                        Text="{Binding SolveMgr.Gh_Alg.WpfGrasshopperFileDescription, Mode=OneWay, FallbackValue='Grasshopper Description'}"
                        TextAlignment="Center"
                        TextWrapping="Wrap" />
                </Grid>
            </GroupBox>
            <Grid Grid.Row="1" Grid.Column="0">
                <TabControl SelectionChanged="TabControl_SelectionChanged" TabStripPlacement="Top">
                    <TabItem Header="Definitions">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <GroupBox
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Header="Grasshopper Input Variables"
                                Style="{StaticResource Blue_GroupBox}">
                                <ListView
                                    ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                    ItemsSource="{Binding SolveMgr.Gh_Alg.InputDefs_View}"
                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                    SelectionMode="Single"
                                    Template="{StaticResource InputParamListView_ControlTemplate}" />
                            </GroupBox>
                            <GroupBox
                                Grid.Row="0"
                                Grid.Column="2"
                                Grid.ColumnSpan="2"
                                Header="Grasshopper Geometry"
                                Style="{StaticResource Blue_GroupBox}">
                                <ScrollViewer>
                                    <StackPanel
                                        VerticalAlignment="Stretch"
                                        CanHorizontallyScroll="False"
                                        CanVerticallyScroll="True"
                                        Orientation="Vertical"
                                        ScrollViewer.VerticalScrollBarVisibility="Visible">
                                        <GroupBox
                                            Header="Point Lists"
                                            Style="{StaticResource CenterHeader_GroupBox}"
                                            Visibility="{Binding SolveMgr.Gh_Alg.HasGeometryDef_PointList}">
                                            <ListView
                                                ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                ItemsSource="{Binding SolveMgr.Gh_Alg.GeometryDefs_PointList_View}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                SelectionMode="Single"
                                                Template="{StaticResource GeometryPointListView_ControlTemplate}" />
                                        </GroupBox>
                                        <GroupBox
                                            Header="Line Lists"
                                            Style="{StaticResource CenterHeader_GroupBox}"
                                            Visibility="{Binding SolveMgr.Gh_Alg.HasGeometryDef_LineList}">
                                            <ListView
                                                ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                ItemsSource="{Binding SolveMgr.Gh_Alg.GeometryDefs_LineList_View}"
                                                ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                SelectionMode="Single"
                                                Template="{StaticResource GeometryLineListView_ControlTemplate}" />
                                        </GroupBox>
                                    </StackPanel>
                                </ScrollViewer>
                            </GroupBox>
                            <GroupBox
                                Grid.Row="1"
                                Grid.Column="0"
                                Header="Finite Element Options"
                                Style="{StaticResource Blue_GroupBox}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto " />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <GroupBox
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Margin="0"
                                        Header="Finite Element Solver"
                                        Style="{StaticResource CenterHeader_GroupBox}">
                                        <ComboBox
                                            Height="20"
                                            Margin="20,0"
                                            DisplayMemberPath="Value"
                                            ItemsSource="{Binding SolveMgr.FeOptions.WfpCaption_FeSolverTypeEnum}"
                                            SelectedValue="{Binding SolveMgr.FeOptions.FeSolverType_Selected}"
                                            SelectedValuePath="Key" />
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        Margin="0"
                                        Header="EV Blk Capture Modes"
                                        Style="{StaticResource CenterHeader_GroupBox}"
                                        Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                        <nupdown:UIntegerUpDown
                                            MaxValue="20"
                                            MinValue="1"
                                            ToolTip="The number of Eigenvalue Buckling Modes that will be captured.&#x0a;This has to be larger than the mode selected as imperfect shape.&#x0a;Ideally, it should be at least 3 modes higher than desired (FE Solver Precision)."
                                            Value="{Binding SolveMgr.FeOptions.EigenvalueBuckling_ShapesToCapture}" />
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Margin="0"
                                        Header="Loads"
                                        Style="{StaticResource CenterHeader_GroupBox}"
                                        Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                        <GroupBox>
                                            <GroupBox.Header>
                                                <CheckBox Content="Gravity" IsChecked="{Binding SolveMgr.FeOptions.Gravity_IsLoad}" />
                                            </GroupBox.Header>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="5" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="20" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="20" />
                                                </Grid.RowDefinitions>
                                                <TextBlock
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    Text="Direction:" />
                                                <ComboBox
                                                    Grid.Row="0"
                                                    Grid.Column="2"
                                                    DisplayMemberPath="Value"
                                                    ItemsSource="{Binding SolveMgr.FeOptions.WfpCaption_MainAxisDirectionEnum}"
                                                    SelectedValue="{Binding SolveMgr.FeOptions.Gravity_DirectionEnum_Selected}"
                                                    SelectedValuePath="Key"
                                                    ToolTip="Direction of the Gravity Load Application.&#x0a;Note: this is applied as inertial loading, thus the orientation of the force is inverted." />
                                                <TextBlock
                                                    Grid.Row="2"
                                                    Grid.Column="0"
                                                    Text="Multiplier:"
                                                    ToolTip="Multiplier applied to the standard gravity." />
                                                <TextBox
                                                    Grid.Row="2"
                                                    Grid.Column="2"
                                                    h:DepObjs.CancelErrorOnLostFocus="true"
                                                    Text="{Binding SolveMgr.FeOptions.Gravity_Multiplier, ValidatesOnExceptions=True}" />
                                            </Grid>
                                        </GroupBox>
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="3"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Margin="0"
                                        Header="Imperfect Shape"
                                        Style="{StaticResource CenterHeader_GroupBox}"
                                        Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="5" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="5" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="5" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                Grid.Column="0"
                                                VerticalAlignment="Center"
                                                Text="EV Blk Mode:" />
                                            <nupdown:UIntegerUpDown
                                                Grid.Column="2"
                                                MaxValue="20"
                                                MinValue="1"
                                                ToolTip="The Eigenvalue Buckling Mode whose deflection will be used as imperfect shape."
                                                Value="{Binding SolveMgr.FeOptions.Imperfect_EigenvalueBucklingMode}" />
                                            <TextBlock
                                                Grid.Column="4"
                                                VerticalAlignment="Center"
                                                Text="Mult:"
                                                ToolTip="Multiplier to scale the deformations from the selected Eigenvalue Buckling Mode." />
                                            <TextBox
                                                Grid.Column="6"
                                                Height="20"
                                                h:DepObjs.CancelErrorOnLostFocus="true"
                                                IsEnabled="{Binding SolveMgr.FeOptions.Imperfect_MultiplierFromBoundingBox, Converter={StaticResource InverseBooleanConverter}}"
                                                Text="{Binding SolveMgr.FeOptions.Imperfect_Multiplier, ValidatesOnExceptions=True}" />
                                            <CheckBox
                                                Grid.Column="8"
                                                VerticalAlignment="Center"
                                                Content="BB/1000"
                                                IsChecked="{Binding SolveMgr.FeOptions.Imperfect_MultiplierFromBoundingBox}"
                                                ToolTip="Use the largest length of the model's Bounding Box, divided by 1000, as multiplier." />
                                        </Grid>

                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="4"
                                        Grid.Column="0"
                                        Margin="0"
                                        Header="Mesh Elements Per Frame"
                                        Style="{StaticResource CenterHeader_GroupBox}"
                                        Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                        <nupdown:UIntegerUpDown
                                            MaxValue="10"
                                            MinValue="1"
                                            ToolTip="The number of mesh elements per frame."
                                            Value="{Binding SolveMgr.FeOptions.Mesh_ElementsPerFrame}" />
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="4"
                                        Grid.Column="1"
                                        Margin="0"
                                        Header="Large Deflections"
                                        Style="{StaticResource CenterHeader_GroupBox}"
                                        Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                        <CheckBox
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Content="Use Large Deflections"
                                            IsChecked="{Binding SolveMgr.FeOptions.LargeDeflections_IsSet}"
                                            ToolTip="Calculate the Non-Linear models using large deflections (update stiffness matrix with each Finite Element iteration)." />
                                    </GroupBox>
                                </Grid>
                            </GroupBox>
                            <GroupBox
                                Grid.Row="2"
                                Grid.Column="0"
                                Header="ScreenShot Options"
                                Style="{StaticResource Blue_GroupBox}">
                                <StackPanel>
                                    <GroupBox Header="Directions">
                                        <StackPanel Orientation="Vertical">
                                            <StackPanel.Resources>
                                                <Style TargetType="CheckBox">
                                                    <Setter Property="Margin" Value="0,0,5,0" />
                                                </Style>
                                            </StackPanel.Resources>
                                            <TextBlock HorizontalAlignment="Center" Text="Axial" />
                                            <Border
                                                HorizontalAlignment="Center"
                                                BorderBrush="{StaticResource EmsLightGraySolidBrush}"
                                                BorderThickness="0,1,0,0">
                                                <WrapPanel Margin="5,2,5,5">
                                                    <CheckBox Content="Top" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Top_Towards_ZNeg}}" />
                                                    <CheckBox Content="Front" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Front_Towards_YPos}}" />
                                                    <CheckBox Content="Back" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Back_Towards_YNeg}}" />
                                                    <CheckBox Content="Left" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Left_Towards_XPos}}" />
                                                    <CheckBox Content="Right" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Right_Towards_XNeg}}" />
                                                </WrapPanel>
                                            </Border>
                                            <TextBlock HorizontalAlignment="Center" Text="Edges" />
                                            <Border
                                                HorizontalAlignment="Center"
                                                BorderBrush="{StaticResource EmsLightGraySolidBrush}"
                                                BorderThickness="0,1,0,0">
                                                <WrapPanel Margin="5,2,5,5">
                                                    <CheckBox Content="Top-Front" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_Top_Front_Edge}}" />
                                                    <CheckBox Content="Top-Back" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_Top_Back_Edge}}" />
                                                    <CheckBox Content="Top-Left" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_Top_Left_Edge}}" />
                                                    <CheckBox Content="Top-Right" IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_Top_Right_Edge}}" />
                                                </WrapPanel>
                                            </Border>
                                            <TextBlock HorizontalAlignment="Center" Text="Corners" />
                                            <Border
                                                HorizontalAlignment="Center"
                                                BorderBrush="{StaticResource EmsLightGraySolidBrush}"
                                                BorderThickness="0,1,0,0">
                                                <Grid Margin="5,2">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition />
                                                        <ColumnDefinition />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <CheckBox
                                                        Grid.Row="0"
                                                        Grid.Column="0"
                                                        Content="Top-Front-Left"
                                                        IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_TFL_Corner}}" />
                                                    <CheckBox
                                                        Grid.Row="0"
                                                        Grid.Column="1"
                                                        Content="Top-Front-Right"
                                                        IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_TFR_Corner}}" />
                                                    <CheckBox
                                                        Grid.Row="1"
                                                        Grid.Column="0"
                                                        Content="Top-Back-Left"
                                                        IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_TBL_Corner}}" />
                                                    <CheckBox
                                                        Grid.Row="1"
                                                        Grid.Column="1"
                                                        Content="Top-Back-Right"
                                                        IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirections, Converter={StaticResource ImageValConv}, ConverterParameter={x:Static fea:ImageCaptureViewDirectionEnum.Perspective_TBR_Corner}}" />
                                                </Grid>
                                            </Border>
                                        </StackPanel>
                                    </GroupBox>
                                    <Grid Margin="0,5" Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="5" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="15" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="5" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            Text="Extrude Factor"
                                            ToolTip="The factor to multiply the extrusion of the sections.&#x0a;No extrusion (lines).&#x0a;Original section size." />
                                        <TextBox
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            h:DepObjs.CancelErrorOnLostFocus="true"
                                            Text="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_Extrude_Multiplier, ValidatesOnExceptions=True}" />
                                        <CheckBox
                                            Grid.Row="0"
                                            Grid.Column="4"
                                            VerticalAlignment="Center"
                                            Content="Plot on Deformed"
                                            IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_DeformedShape}"
                                            ToolTip="Plot on deformed shape (for supported plots).&#x0a;Multiplied by 5% of the model's largest edge of the bounding box." />
                                        <CheckBox
                                            Grid.Row="0"
                                            Grid.Column="6"
                                            VerticalAlignment="Center"
                                            Content="Undef. Shadow"
                                            IsChecked="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_UndeformedShadow}"
                                            ToolTip="Plot a shadow of the undeformed shape (for supported plots)." />
                                    </Grid>
                                </StackPanel>

                            </GroupBox>
                            <GroupBox
                                Grid.Row="1"
                                Grid.RowSpan="2"
                                Grid.Column="1"
                                Grid.ColumnSpan="3"
                                Header="Finite Element Result Selection"
                                Style="{StaticResource Blue_GroupBox}"
                                Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                <ScrollViewer>
                                    <ItemsControl
                                        ItemsSource="{Binding SolveMgr.FeOptions.WpfResults.Groups}"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.VerticalScrollBarVisibility="Visible">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <GroupBox Style="{StaticResource CenterHeader_GroupBox}">
                                                    <GroupBox.Header>
                                                        <TextBlock x:Name="Shape_TextBlock">
                                                            <!--  The "Name" here is of the Shape Group  -->
                                                            <Run FontSize="16" Text="{Binding Path=Name, Mode=OneWay, Converter={StaticResource Wpf_EnumToString_Converter}}" />
                                                            <Run Foreground="{StaticResource EmsExplanationSolidBrush}" Text=" [" />
                                                            <Run Foreground="{StaticResource EmsExplanationSolidBrush}" Text="{Binding Mode=OneWay, Converter={StaticResource Wpf_FeResultClassificationTreeViewCounter_Converter}}" />
                                                            <Run Foreground="{StaticResource EmsExplanationSolidBrush}" Text="]" />
                                                        </TextBlock>
                                                    </GroupBox.Header>
                                                    <!--  Second List View - Grouping by Result Family  -->
                                                    <ItemsControl ItemsSource="{Binding Items}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel HorizontalAlignment="Center" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <StackPanel Orientation="Horizontal">
                                                                    <DockPanel
                                                                        Width="100"
                                                                        Margin="5"
                                                                        LastChildFill="True">
                                                                        <Border
                                                                            HorizontalAlignment="Stretch"
                                                                            BorderBrush="{StaticResource EmsFaintBlueSolidBrush}"
                                                                            BorderThickness="0,0,0,1"
                                                                            DockPanel.Dock="Top">

                                                                            <Button
                                                                                VerticalAlignment="Center"
                                                                                VerticalContentAlignment="Center"
                                                                                Click="{eb:MethodBinding {Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions},
                                                                                                         SelectOrDeselect_AllResultsInShapeFamily,
                                                                                                         {Binding Path=Name},
                                                                                                         {Binding ElementName=Shape_TextBlock, Path=DataContext.Name}}"
                                                                                Content="{Binding Path=Name, Mode=OneWay, Converter={StaticResource Wpf_EnumToString_Converter}}"
                                                                                Style="{x:Null}"
                                                                                Template="{StaticResource FiniteElementResultSelectionCategoryButtonContentTemplate}" />

                                                                        </Border>

                                                                        <Border
                                                                            HorizontalAlignment="Stretch"
                                                                            BorderBrush="{StaticResource EmsFaintBlueSolidBrush}"
                                                                            BorderThickness="1,0,0,0">
                                                                            <ListView ItemsSource="{Binding Items}">
                                                                                <ListView.Template>
                                                                                    <ControlTemplate>
                                                                                        <ItemsPresenter />
                                                                                    </ControlTemplate>
                                                                                </ListView.Template>
                                                                                <ListView.ItemTemplate>
                                                                                    <DataTemplate>
                                                                                        <CheckBox
                                                                                            Content="{Binding ResultTypeDescription}"
                                                                                            IsChecked="{Binding OutputData_IsSelected}"
                                                                                            ToolTip="{Binding ResultTypeExplanation}" />
                                                                                    </DataTemplate>
                                                                                </ListView.ItemTemplate>
                                                                            </ListView>
                                                                        </Border>
                                                                    </DockPanel>
                                                                </StackPanel>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </GroupBox>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </GroupBox>
                        </Grid>
                    </TabItem>
                    <TabItem Header="Optimize">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width=".5*" />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <GroupBox
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Header="Optimization Solver Options"
                                Style="{StaticResource Blue_GroupBox}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <GroupBox
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Header="Type">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="10" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <ComboBox
                                                DisplayMemberPath="Value"
                                                ItemsSource="{Binding SolveMgr.NlOptManager.NlOptAlgorithmEnumDescriptions}"
                                                SelectedValue="{Binding SolveMgr.NlOptManager.NlOptSolverType}"
                                                SelectedValuePath="Key" />
                                            <CheckBox
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                Content="Lagrangian"
                                                IsChecked="{Binding SolveMgr.NlOptManager.UseLagrangian}" />
                                        </Grid>
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        ToolTip="Set Population Size. If not set, it will be calculated automatically."
                                        Visibility="{Binding SolveMgr.NlOptManager.SolverNeedsPopulationSize}">
                                        <GroupBox.Header>
                                            <CheckBox Content="Population Size" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_PopulationSize}" />
                                        </GroupBox.Header>
                                        <TextBox
                                            h:DepObjs.CancelErrorOnLostFocus="True"
                                            IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_PopulationSize}"
                                            Text="{Binding SolveMgr.NlOptManager.PopulationSize, ValidatesOnExceptions=True}" />
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Margin="0,5,0,0"
                                        Header="Stop Controls"
                                        Style="{StaticResource CenterHeader_GroupBox}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />

                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <GroupBox
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="2,0"
                                                ToolTip="Stop when an objective value of at least stopval is found.&#x0a;Stop minimizing when an objective value ≤ stopval is found, or stop maximizing a value ≥ stopval is found.">
                                                <GroupBox.Header>
                                                    <CheckBox Content="F Stop Value" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_StopValueOnObjectiveFunction}" />
                                                </GroupBox.Header>
                                                <TextBox
                                                    h:DepObjs.CancelErrorOnLostFocus="True"
                                                    IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_StopValueOnObjectiveFunction}"
                                                    Text="{Binding SolveMgr.NlOptManager.StopValueOnObjectiveFunction, ValidatesOnExceptions=True}" />
                                            </GroupBox>
                                            <GroupBox
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="2,0"
                                                ToolTip="Set relative tolerance on function value.&#x0a;Stop when an optimization step (or an estimate of the optimum) changes the objective function value by less than tolerance multiplied&#x0a;by the absolute value of the function value.&#x0a;(If there is any chance that your optimum function value is close to zero, you might want to set an absolute tolerance as well.)">
                                                <GroupBox.Header>
                                                    <CheckBox Content="F Relative Tolerance" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_RelativeToleranceOnFunctionValue}" />
                                                </GroupBox.Header>
                                                <TextBox
                                                    h:DepObjs.CancelErrorOnLostFocus="True"
                                                    IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_RelativeToleranceOnFunctionValue}"
                                                    Text="{Binding SolveMgr.NlOptManager.RelativeToleranceOnFunctionValue, ValidatesOnExceptions=True}" />
                                            </GroupBox>
                                            <GroupBox
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Margin="2,0"
                                                VerticalAlignment="Top"
                                                ToolTip="Set absolute tolerance on function value.&#x0a;Stop when an optimization step (or an estimate of the optimum) changes the function value by less than tolerance.">
                                                <GroupBox.Header>
                                                    <CheckBox Content="F Absolute Tolerance" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_AbsoluteToleranceOnFunctionValue}" />
                                                </GroupBox.Header>
                                                <TextBox
                                                    h:DepObjs.CancelErrorOnLostFocus="True"
                                                    IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_AbsoluteToleranceOnFunctionValue}"
                                                    Text="{Binding SolveMgr.NlOptManager.AbsoluteToleranceOnFunctionValue, ValidatesOnExceptions=True}" />
                                            </GroupBox>
                                            <GroupBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="2,0"
                                                ToolTip="Set relative tolerance on optimization parameters.&#x0a;Stop when an optimization step (or an estimate of the optimum) causes a relative change the input X by less than tolerance.">
                                                <GroupBox.Header>
                                                    <CheckBox Content="X Relative Tolerance" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_RelativeToleranceOnParameterValue}" />
                                                </GroupBox.Header>
                                                <TextBox
                                                    h:DepObjs.CancelErrorOnLostFocus="True"
                                                    IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_RelativeToleranceOnParameterValue}"
                                                    Text="{Binding SolveMgr.NlOptManager.RelativeToleranceOnParameterValue, ValidatesOnExceptions=True}" />
                                            </GroupBox>
                                            <GroupBox
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="2,0"
                                                ToolTip="Sets the maximum number of iterations.">
                                                <GroupBox.Header>
                                                    <CheckBox Content="Max. Iterations" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_MaximumIterations}" />
                                                </GroupBox.Header>
                                                <TextBox
                                                    h:DepObjs.CancelErrorOnLostFocus="True"
                                                    IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_MaximumIterations}"
                                                    Text="{Binding SolveMgr.NlOptManager.MaximumIterations, ValidatesOnExceptions=True}" />
                                            </GroupBox>
                                            <GroupBox
                                                Grid.Row="2"
                                                Grid.Column="1"
                                                Margin="2,0"
                                                VerticalAlignment="Top"
                                                ToolTip="Sets the maximum solve time, in seconds.">
                                                <GroupBox.Header>
                                                    <CheckBox Content="Max. Time" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_MaximumRunTime}" />
                                                </GroupBox.Header>
                                                <TextBox
                                                    h:DepObjs.CancelErrorOnLostFocus="True"
                                                    IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_MaximumRunTime}"
                                                    Text="{Binding SolveMgr.NlOptManager.MaximumRunTime, ValidatesOnExceptions=True}" />
                                            </GroupBox>

                                            <GroupBox
                                                Grid.Row="3"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="2,0"
                                                ToolTip="Set absolute tolerances on optimization parameters.&#x0a;Stop when an optimization step (or an estimate of the optimum) changes every parameter X[i] by less than its assigned tolerance. Criterion is disabled for a parameter X[i] if its tolerance is non-positive.">
                                                <GroupBox.Header>
                                                    <CheckBox Content="X Absolute Tolerances" IsChecked="{Binding SolveMgr.NlOptManager.IsOn_AbsoluteToleranceOnParameterValue}" />
                                                </GroupBox.Header>
                                                <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Visible">
                                                    <ListView
                                                        IsEnabled="{Binding SolveMgr.NlOptManager.IsOn_AbsoluteToleranceOnParameterValue}"
                                                        ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                        ItemsSource="{Binding SolveMgr.NlOptManager.AbsoluteToleranceOnParameterValue}">

                                                        <ListBox.ItemTemplate>
                                                            <DataTemplate>
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width=".7*" />
                                                                        <ColumnDefinition />
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBlock Grid.Column="0" Text="{Binding ParameterName, Mode=OneWay}" />
                                                                    <TextBox
                                                                        Grid.Column="1"
                                                                        h:DepObjs.CancelErrorOnLostFocus="True"
                                                                        Text="{Binding ParameterTolerance, ValidatesOnExceptions=True}" />
                                                                </Grid>
                                                            </DataTemplate>
                                                        </ListBox.ItemTemplate>
                                                    </ListView>
                                                </ScrollViewer>
                                            </GroupBox>

                                        </Grid>
                                    </GroupBox>
                                </Grid>
                            </GroupBox>
                            <GroupBox
                                Grid.Row="0"
                                Grid.RowSpan="3"
                                Grid.Column="2"
                                Grid.ColumnSpan="4"
                                Header="Problem Quantities"
                                Style="{StaticResource Blue_GroupBox}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="2*" />
                                    </Grid.ColumnDefinitions>
                                    <GroupBox>
                                        <GroupBox.Header>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition />
                                                    <ColumnDefinition />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock
                                                    Margin="0,0,5,0"
                                                    VerticalAlignment="Center"
                                                    Text="Available Quantities" />
                                                <Button
                                                    Grid.Column="3"
                                                    Width="22"
                                                    Height="22"
                                                    Margin="2,0"
                                                    Background="{StaticResource EmsGreenPanelBackground}"
                                                    Click="{eb:MethodBinding {Binding SolveMgr},
                                                                             AddAllProblemQuantity_FunctionObjective}"
                                                    DockPanel.Dock="Right"
                                                    ToolTip="Add ALL quantities as a variable of the Objective Function.">
                                                    <Button.Content>
                                                        <TextBlock FontFamily="Segoe UI Symbol" Text="◉" />
                                                    </Button.Content>
                                                </Button>
                                                <Button
                                                    Grid.Column="2"
                                                    Width="22"
                                                    Height="22"
                                                    Margin="2,0"
                                                    Background="LightGoldenrodYellow"
                                                    Click="{eb:MethodBinding {Binding SolveMgr},
                                                                             AddAllProblemQuantity_ConstraintObjective}"
                                                    DockPanel.Dock="Right"
                                                    ToolTip="Add ALL quantities as a constraint variable.">
                                                    <Button.Content>
                                                        <TextBlock FontFamily="Segoe UI Symbol" Text="⛓" />
                                                    </Button.Content>
                                                </Button>
                                                <Button
                                                    Grid.Column="1"
                                                    Width="22"
                                                    Height="22"
                                                    Margin="2,0"
                                                    Click="{eb:MethodBinding {Binding SolveMgr},
                                                                             AddAllProblemQuantity_OutputOnly}"
                                                    DockPanel.Dock="Right"
                                                    ToolTip="Add ALL quantities as output only.">
                                                    <Button.Content>
                                                        <TextBlock FontFamily="Segoe UI Symbol" Text="" />
                                                    </Button.Content>
                                                </Button>
                                            </Grid>
                                        </GroupBox.Header>
                                        <ScrollViewer>
                                            <StackPanel
                                                Orientation="Vertical"
                                                ScrollViewer.CanContentScroll="True"
                                                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                ScrollViewer.VerticalScrollBarVisibility="Visible">
                                                <GroupBox Header="Grasshopper Geometry" Style="{StaticResource CenterHeader_GroupBox}">
                                                    <ListView
                                                        ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                        ItemsSource="{Binding SolveMgr.Gh_Alg.GeometryDefs_DoubleList_View}"
                                                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                        SelectionMode="Single">
                                                        <ListView.ItemTemplate>
                                                            <DataTemplate>
                                                                <DockPanel LastChildFill="True">
                                                                    <Button
                                                                        Width="22"
                                                                        Height="22"
                                                                        Margin="2,0"
                                                                        Background="{StaticResource EmsGreenPanelBackground}"
                                                                        Click="{eb:MethodBinding AddProblemQuantity_FunctionObjective,
                                                                                                 {Binding ElementName=MainGrid, Path=DataContext.SolveMgr}}"
                                                                        DockPanel.Dock="Right"
                                                                        ToolTip="Add quantity type as a variable of the Objective Function.">
                                                                        <Button.Content>
                                                                            <TextBlock FontFamily="Segoe UI Symbol" Text="◉" />
                                                                        </Button.Content>
                                                                    </Button>
                                                                    <Button
                                                                        Width="22"
                                                                        Height="22"
                                                                        Margin="2,0"
                                                                        Background="LightGoldenrodYellow"
                                                                        Click="{eb:MethodBinding AddProblemQuantity_ConstraintObjective,
                                                                                                 {Binding ElementName=MainGrid, Path=DataContext.SolveMgr}}"
                                                                        DockPanel.Dock="Right"
                                                                        ToolTip="Add quantity type as a constraint variable.">
                                                                        <Button.Content>
                                                                            <TextBlock FontFamily="Segoe UI Symbol" Text="⛓" />
                                                                        </Button.Content>
                                                                    </Button>
                                                                    <Button
                                                                        Width="22"
                                                                        Height="22"
                                                                        Margin="2,0"
                                                                        Click="{eb:MethodBinding AddProblemQuantity_OutputOnly,
                                                                                                 {Binding ElementName=MainGrid, Path=DataContext.SolveMgr}}"
                                                                        DockPanel.Dock="Right"
                                                                        ToolTip="Add quantity type as output only.">
                                                                        <Button.Content>
                                                                            <TextBlock FontFamily="Segoe UI Symbol" Text="" />
                                                                        </Button.Content>
                                                                    </Button>
                                                                    <TextBlock Text="{Binding Name}" />
                                                                </DockPanel>
                                                            </DataTemplate>
                                                        </ListView.ItemTemplate>
                                                    </ListView>
                                                </GroupBox>
                                                <GroupBox
                                                    Header="Finite Element Quantity"
                                                    Style="{StaticResource CenterHeader_GroupBox}"
                                                    Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                                                    <ListView
                                                        ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                        ItemsSource="{Binding SolveMgr.FeOptions.WpfAllSelectedOutputResults}"
                                                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                        SelectionMode="Single">

                                                        <ListView.ItemTemplate>
                                                            <DataTemplate>
                                                                <DockPanel LastChildFill="True">
                                                                    <Button
                                                                        Width="22"
                                                                        Height="22"
                                                                        Margin="2,0"
                                                                        Background="{StaticResource EmsGreenPanelBackground}"
                                                                        Click="{eb:MethodBinding AddProblemQuantity_FunctionObjective,
                                                                                                 {Binding ElementName=MainGrid, Path=DataContext.SolveMgr}}"
                                                                        DockPanel.Dock="Right"
                                                                        ToolTip="Add quantity type as a variable of the Objective Function.">
                                                                        <Button.Content>
                                                                            <TextBlock FontFamily="Segoe UI Symbol" Text="◉" />
                                                                        </Button.Content>
                                                                    </Button>
                                                                    <Button
                                                                        Width="22"
                                                                        Height="22"
                                                                        Margin="2,0"
                                                                        Background="LightGoldenrodYellow"
                                                                        Click="{eb:MethodBinding AddProblemQuantity_ConstraintObjective,
                                                                                                 {Binding ElementName=MainGrid, Path=DataContext.SolveMgr}}"
                                                                        DockPanel.Dock="Right"
                                                                        ToolTip="Add quantity type as a constraint variable.">
                                                                        <Button.Content>
                                                                            <TextBlock FontFamily="Segoe UI Symbol" Text="⛓" />
                                                                        </Button.Content>
                                                                    </Button>
                                                                    <Button
                                                                        Width="22"
                                                                        Height="22"
                                                                        Margin="2,0"
                                                                        Click="{eb:MethodBinding AddProblemQuantity_OutputOnly,
                                                                                                 {Binding ElementName=MainGrid, Path=DataContext.SolveMgr}}"
                                                                        DockPanel.Dock="Right"
                                                                        ToolTip="Add quantity type as output only.">
                                                                        <Button.Content>
                                                                            <TextBlock FontFamily="Segoe UI Symbol" Text="" />
                                                                        </Button.Content>
                                                                    </Button>
                                                                    <Grid Margin="0,0,0,5" ToolTip="{Binding ResultTypeExplanation}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="15" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition />
                                                                            <RowDefinition />
                                                                        </Grid.RowDefinitions>
                                                                        <Border Style="{StaticResource LightBlue_BottomOnly_Border}">
                                                                            <TextBlock
                                                                                Grid.Row="0"
                                                                                Grid.Column="0"
                                                                                FontWeight="Bold"
                                                                                Text="{Binding TargetShapeDescription}" />
                                                                        </Border>
                                                                        <TextBlock
                                                                            Grid.Row="1"
                                                                            Grid.Column="0"
                                                                            Style="{StaticResource Explanation_TextBlock}"
                                                                            Text="{Binding ResultFamilyGroupName}" />
                                                                        <TextBlock
                                                                            Grid.Row="0"
                                                                            Grid.RowSpan="2"
                                                                            Grid.Column="2"
                                                                            VerticalAlignment="Center"
                                                                            Text="{Binding ResultTypeDescription}" />
                                                                    </Grid>
                                                                </DockPanel>
                                                            </DataTemplate>
                                                        </ListView.ItemTemplate>
                                                    </ListView>
                                                </GroupBox>
                                            </StackPanel>
                                        </ScrollViewer>
                                    </GroupBox>
                                    <Grid Grid.Column="1">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <GroupBox
                                            Grid.Row="0"
                                            Header="Output Only"
                                            Style="{StaticResource CenterHeader_GroupBox}">
                                            <ListView
                                                ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                ItemTemplate="{StaticResource ProblemQuantity_OutputOnly_Template}"
                                                ItemsSource="{Binding SolveMgr.WpfProblemQuantities_OutputOnly}"
                                                SelectionMode="Single"
                                                Template="{StaticResource ProblemQuantities_OutputOnly_SelectedListView_ControlTemplate}" />
                                        </GroupBox>
                                        <GroupBox
                                            Grid.Row="1"
                                            Header="Objective Function"
                                            Style="{StaticResource CenterHeader_GroupBox}">
                                            <ListView
                                                ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                ItemTemplate="{StaticResource ProblemQuantity_ObjectiveFunction_Template}"
                                                ItemsSource="{Binding SolveMgr.WpfProblemQuantities_ObjectiveFunction}"
                                                SelectionMode="Single"
                                                Template="{StaticResource ProblemQuantities_ObjectiveFunction_SelectedListView_ControlTemplate}" />
                                        </GroupBox>
                                        <GroupBox
                                            Grid.Row="2"
                                            Header="Constraints"
                                            Style="{StaticResource CenterHeader_GroupBox}">
                                            <ListView
                                                ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                ItemTemplate="{StaticResource ProblemQuantity_Constraint_Template}"
                                                ItemsSource="{Binding SolveMgr.WpfProblemQuantities_Constraint}"
                                                SelectionMode="Single"
                                                Template="{StaticResource ProblemQuantities_Constraint_SelectedListView_ControlTemplate}" />
                                        </GroupBox>

                                    </Grid>
                                </Grid>
                            </GroupBox>
                            <GroupBox
                                Grid.Row="1"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Header="Controls">
                                <Grid>
                                    <Button
                                        x:Name="Solve"
                                        Click="Solve_Click"
                                        Content="Solve" />
                                </Grid>
                            </GroupBox>
                        </Grid>
                    </TabItem>
                    <TabItem Header="Study Sections" Visibility="{Binding ElementName=MainGrid, Path=DataContext.SolveMgr.FeOptions.IsFeProblem}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                        </Grid>
                    </TabItem>
                    <TabItem
                        Height="22"
                        VerticalAlignment="Top"
                        Header="Results">
                        <TabControl>
                            <TabItem Header="Summary">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition Height="2*" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <GroupBox Header="NlOpt Status" Style="{StaticResource Blue_GroupBox}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <GroupBox>
                                                <GroupBox.Header>
                                                    <TextBlock Text="{Binding SolveMgr.NlOptManager.WpfNlOptSolverTypeString}" />
                                                </GroupBox.Header>
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="*" />
                                                    </Grid.RowDefinitions>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition Width="10" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <GroupBox
                                                        Grid.Row="0"
                                                        Grid.Column="0"
                                                        Grid.ColumnSpan="3"
                                                        Margin="0,10,0,0"
                                                        Header="Result Status"
                                                        Style="{StaticResource CenterHeader_GroupBox}">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="*" />
                                                            </Grid.RowDefinitions>
                                                            <Label
                                                                Grid.Row="0"
                                                                Margin="0,5,0,0"
                                                                HorizontalAlignment="Center"
                                                                Style="{StaticResource RedGreenYellowGrayPanel}"
                                                                Tag="{Binding SolveMgr.NlOptManager.WpfResultStyleTag}"
                                                                ToolTip="{Binding SolveMgr.NlOptManager.WpfResultText}">
                                                                <TextBlock Text="{Binding SolveMgr.NlOptManager.Result}" TextWrapping="Wrap" />
                                                            </Label>
                                                            <Border
                                                                Grid.Row="1"
                                                                Margin="15,10"
                                                                BorderBrush="{StaticResource EmsFaintGraySolidBrush}"
                                                                BorderThickness="0,1,0,0"
                                                                Visibility="{Binding SolveMgr.NlOptManager.WpfResultExceptionVisibility}">
                                                                <Grid>
                                                                    <ScrollViewer
                                                                        CanContentScroll="True"
                                                                        HorizontalScrollBarVisibility="Disabled"
                                                                        VerticalScrollBarVisibility="Auto">
                                                                        <TextBlock
                                                                            Margin="20,10,20,5"
                                                                            Style="{StaticResource Explanation_TextBlock}"
                                                                            Text="{Binding SolveMgr.NlOptManager.WpfResultExceptionMessage}"
                                                                            TextWrapping="Wrap"
                                                                            ToolTip="Exception" />
                                                                    </ScrollViewer>
                                                                </Grid>
                                                            </Border>
                                                        </Grid>

                                                    </GroupBox>


                                                </Grid>
                                            </GroupBox>
                                            <GroupBox Grid.Column="1" Header="Stop Criteria Status">
                                                <ListBox ItemsSource="{Binding SolveMgr.NlOptManager.WpfNlOptEndCriteriaStatus}">
                                                    <ListBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition Width="10" />
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition Width="10" />
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition Width="10" />
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition Width="10" />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock Grid.Column="0" Text="{Binding Name}" />
                                                                <TextBlock Grid.Column="2" Text="{Binding Current}" />
                                                                <TextBlock Grid.Column="4" Text="{Binding Limit}" />
                                                                <TextBlock Grid.Column="6" Text="{Binding IsStop}" />
                                                            </Grid>
                                                        </DataTemplate>
                                                    </ListBox.ItemTemplate>
                                                </ListBox>
                                            </GroupBox>
                                        </Grid>
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Header="Result List"
                                        Style="{StaticResource Blue_GroupBox}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0" Style="{StaticResource ListBoxHeaderGrid}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="80" />
                                                    <ColumnDefinition Width=".6*" />
                                                    <ColumnDefinition Width="120" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="{StaticResource VerticalScrollBarWidth}" />
                                                </Grid.ColumnDefinitions>
                                                <Label Grid.Column="0">
                                                    <TextBlock TextDecorations="underline">
                                                        <Run Text="#" />
                                                    </TextBlock>
                                                </Label>
                                                <Label Grid.Column="1">
                                                    <TextBlock TextDecorations="underline">
                                                        <Run Text="Inputs" />
                                                    </TextBlock>
                                                </Label>
                                                <Label Grid.Column="2">
                                                    <TextBlock TextDecorations="underline">
                                                        <Run Text="Function Value" />
                                                    </TextBlock>
                                                </Label>
                                                <Label Grid.Column="3">
                                                    <TextBlock TextDecorations="underline">Problem Quantities</TextBlock>
                                                </Label>
                                                <Label Grid.Column="4" BorderThickness="0,1,0,1" />
                                            </Grid>
                                            <ListBox
                                                Grid.Row="1"
                                                ItemContainerStyle="{StaticResource ListBoxContainerStyle}"
                                                ItemTemplate="{StaticResource Results_FunctionIterationSummary_DataTemplate}"
                                                ItemsSource="{Binding SolveMgr.WpfFunctionPoints}"
                                                SelectionMode="Single"
                                                Style="{StaticResource VirtualListBox}" />
                                        </Grid>
                                    </GroupBox>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Data">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="300" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <GroupBox
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Header="Iterations"
                                        Style="{StaticResource Blue_GroupBox}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0" Style="{StaticResource ListBoxHeaderGrid}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="{StaticResource VerticalScrollBarWidth}" />
                                                </Grid.ColumnDefinitions>
                                                <Label Grid.Column="0" Margin="0,0,0,0">
                                                    <TextBlock TextDecorations="underline">
                                                        <Run Text="#" />
                                                    </TextBlock>
                                                </Label>
                                                <Label Grid.Column="1">
                                                    <TextBlock TextDecorations="underline">Function Value</TextBlock>
                                                </Label>
                                                <Label Grid.Column="2" BorderThickness="0,1,0,1" />
                                            </Grid>
                                            <ListBox
                                                Grid.Row="1"
                                                ItemContainerStyle="{StaticResource ListBoxContainerStyle}"
                                                ItemTemplate="{StaticResource Results_FunctionIterationSelection_DataTemplate}"
                                                ItemsSource="{Binding SolveMgr.WpfFunctionPoints}"
                                                SelectionMode="Single"
                                                Style="{StaticResource VirtualListBox}" />
                                        </Grid>

                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Header="Select Data"
                                        Style="{StaticResource Blue_GroupBox}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <GroupBox Header="Problem Quantity Type" Style="{StaticResource CenterHeader_GroupBox}">
                                                <ListView
                                                    ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                    ItemTemplate="{StaticResource Results_DataSelection_ProblemQuantitiesSelection_ProblemQuantity}"
                                                    ItemsSource="{Binding SolveMgr.WpfProblemQuantityAvailableTypes}"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                    SelectedItem="{Binding SolveMgr.FeOptions.SelectedDisplayDataResultClassification}"
                                                    SelectionMode="Single" />
                                            </GroupBox>
                                        </Grid>
                                    </GroupBox>
                                    <Grid Grid.Row="0" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <GroupBox
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            Header="Iteration Details"
                                            Style="{StaticResource Blue_GroupBox}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <GroupBox
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    Header="Status">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <Border
                                                            Grid.Row="0"
                                                            Grid.Column="0"
                                                            Margin="5"
                                                            Tag="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.IsSuccess}">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="Tag" Value="{StaticResource True}">
                                                                            <Setter Property="Background" Value="{StaticResource EmsGreenPanelBackground}" />
                                                                            <Setter Property="BorderBrush" Value="Green" />
                                                                            <Setter Property="BorderThickness" Value="1" />
                                                                        </Trigger>
                                                                        <Trigger Property="Tag" Value="{StaticResource False}">
                                                                            <Setter Property="Background" Value="{StaticResource EmsRedPanelBackground}" />
                                                                            <Setter Property="BorderBrush" Value="DarkRed" />
                                                                            <Setter Property="BorderThickness" Value="1" />
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <TextBlock HorizontalAlignment="Center" Text="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.StatusString}" />
                                                        </Border>
                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="0"
                                                            Text="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.FailureException.Message}"
                                                            TextWrapping="Wrap"
                                                            Visibility="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.ErrorMessageVisibility}" />
                                                    </Grid>
                                                </GroupBox>
                                                <GroupBox
                                                    Grid.Row="0"
                                                    Grid.Column="1"
                                                    Header="Elapsed Time">
                                                    <Grid>
                                                        <Grid.Resources>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="HorizontalAlignment" Value="Center" />
                                                            </Style>
                                                        </Grid.Resources>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="10" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <TextBlock
                                                            Grid.Row="0"
                                                            Grid.Column="0"
                                                            Text="Grasshopper" />
                                                        <TextBlock
                                                            Grid.Row="0"
                                                            Grid.Column="2"
                                                            Text="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.GhUpdateTimeSpan.TotalSeconds, StringFormat={}{0:f3}}" />

                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="0"
                                                            Text="Finite Element" />
                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="2"
                                                            Text="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.FeInputCalcOutputTimeSpan.TotalSeconds, StringFormat={}{0:f3}}" />

                                                        <TextBlock
                                                            Grid.Row="2"
                                                            Grid.Column="0"
                                                            Text="Calculate" />
                                                        <TextBlock
                                                            Grid.Row="2"
                                                            Grid.Column="2"
                                                            Text="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.CalculateTimeSpan.TotalSeconds, StringFormat={}{0:f3}}" />

                                                        <TextBlock
                                                            Grid.Row="3"
                                                            Grid.Column="0"
                                                            Text="Gradient" />
                                                        <TextBlock
                                                            Grid.Row="3"
                                                            Grid.Column="2"
                                                            Text="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.TotalGradientTimeSpan.TotalSeconds, StringFormat={}{0:f3}}" />

                                                        <Border
                                                            Grid.Row="4"
                                                            Grid.Column="0"
                                                            Grid.ColumnSpan="3"
                                                            BorderBrush="{StaticResource EmsLightBlueSolidBrush}"
                                                            BorderThickness="0,1,0,0" />

                                                        <TextBlock
                                                            Grid.Row="5"
                                                            Grid.Column="0"
                                                            FontWeight="Bold"
                                                            Text="Total (s)" />
                                                        <TextBlock
                                                            Grid.Row="5"
                                                            Grid.Column="2"
                                                            Text="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.TotalIterationTimeSpan.TotalSeconds, StringFormat={}{0:f3}}" />

                                                    </Grid>
                                                </GroupBox>
                                            </Grid>
                                        </GroupBox>

                                        <GroupBox
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Grid.ColumnSpan="2"
                                            Header="Inputs and Gradients"
                                            Style="{StaticResource Blue_GroupBox}">
                                            <DataGrid
                                                AutoGenerateColumns="True"
                                                AutoGeneratingColumn="DataGrid_AutoGeneratingColumn_AddDoubleFormats"
                                                CanUserAddRows="False"
                                                CanUserDeleteRows="False"
                                                CanUserReorderColumns="False"
                                                CanUserResizeRows="False"
                                                CanUserSortColumns="True"
                                                ColumnWidth="*"
                                                IsReadOnly="True"
                                                ItemsSource="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.GradientDataAsDataView}" />
                                        </GroupBox>
                                    </Grid>
                                    <GroupBox
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        Header="Table Data"
                                        Style="{StaticResource Blue_GroupBox}">
                                        <DataGrid
                                            AutoGenerateColumns="True"
                                            AutoGeneratingColumn="DataGrid_AutoGeneratingColumn_AddDoubleFormats"
                                            CanUserAddRows="False"
                                            CanUserDeleteRows="False"
                                            CanUserReorderColumns="False"
                                            CanUserResizeRows="False"
                                            CanUserSortColumns="True"
                                            ColumnWidth="*"
                                            IsReadOnly="True"
                                            ItemsSource="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.SelectedDisplayData}" />
                                    </GroupBox>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Images">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="300" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <GroupBox
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Header="Iterations"
                                        Style="{StaticResource Blue_GroupBox}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0" Style="{StaticResource ListBoxHeaderGrid}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="{StaticResource VerticalScrollBarWidth}" />
                                                </Grid.ColumnDefinitions>
                                                <Label Grid.Column="0" Margin="0,0,0,0">
                                                    <TextBlock TextDecorations="underline">
                                                        <Run Text="#" />
                                                    </TextBlock>
                                                </Label>
                                                <Label Grid.Column="1">
                                                    <TextBlock TextDecorations="underline">Function Value</TextBlock>
                                                </Label>
                                                <Label Grid.Column="2" BorderThickness="0,1,0,1" />
                                            </Grid>
                                            <ListBox
                                                Grid.Row="1"
                                                ItemContainerStyle="{StaticResource ListBoxContainerStyle}"
                                                ItemTemplate="{StaticResource Results_FunctionIterationSelection_DataTemplate}"
                                                ItemsSource="{Binding SolveMgr.WpfFunctionPoints}"
                                                SelectionMode="Single"
                                                Style="{StaticResource VirtualListBox}" />
                                        </Grid>
                                    </GroupBox>
                                    <GroupBox
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Header="Select Image"
                                        Style="{StaticResource Blue_GroupBox}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <GroupBox Header="Direction" Style="{StaticResource CenterHeader_GroupBox}">
                                                <ListView
                                                    ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                    ItemsSource="{Binding SolveMgr.FeOptions.ScreenShotOptions.ImageCapture_ViewDirectionsEnumerable}"
                                                    SelectedItem="{Binding SolveMgr.FeOptions.ScreenShotOptions.SelectedDisplayDirection}"
                                                    SelectionMode="Single" />
                                            </GroupBox>
                                            <GroupBox
                                                Grid.Row="1"
                                                Header="Finite Element Quantity Type"
                                                Style="{StaticResource CenterHeader_GroupBox}">
                                                <ListView
                                                    ItemContainerStyle="{StaticResource ListViewContainerStyle}"
                                                    ItemsSource="{Binding SolveMgr.FeOptions.WpfAllSelectedOutputResults}"
                                                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                    SelectedItem="{Binding SolveMgr.FeOptions.SelectedDisplayImageResultClassification}"
                                                    SelectionMode="Single">
                                                    <ListView.ItemTemplate>
                                                        <DataTemplate>
                                                            <Grid Margin="0,0,0,5" ToolTip="{Binding ResultTypeExplanation}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="15" />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition />
                                                                    <RowDefinition />
                                                                </Grid.RowDefinitions>
                                                                <Border Style="{StaticResource LightBlue_BottomOnly_Border}">
                                                                    <TextBlock
                                                                        Grid.Row="0"
                                                                        Grid.Column="0"
                                                                        FontWeight="Bold"
                                                                        Text="{Binding TargetShapeDescription}" />
                                                                </Border>
                                                                <TextBlock
                                                                    Grid.Row="1"
                                                                    Grid.Column="0"
                                                                    Style="{StaticResource Explanation_TextBlock}"
                                                                    Text="{Binding ResultFamilyGroupName}" />
                                                                <TextBlock
                                                                    Grid.Row="0"
                                                                    Grid.RowSpan="2"
                                                                    Grid.Column="2"
                                                                    VerticalAlignment="Center"
                                                                    Text="{Binding ResultTypeDescription}" />
                                                            </Grid>
                                                        </DataTemplate>
                                                    </ListView.ItemTemplate>
                                                </ListView>
                                            </GroupBox>
                                        </Grid>
                                    </GroupBox>
                                    <Image
                                        Grid.Row="0"
                                        Grid.RowSpan="2"
                                        Grid.Column="1"
                                        Width="810"
                                        Height="610"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        SnapsToDevicePixels="True"
                                        Source="{Binding SolveMgr.WpfFunctionPoints.CurrentItem.SelectedDisplayScreenShot}"
                                        Stretch="None" />
                                </Grid>
                            </TabItem>
                        </TabControl>
                    </TabItem>
                </TabControl>
            </Grid>
        </Grid>
        <e:BusyOverlay x:Name="BusyOverlay" Visibility="Collapsed" />
        <e:CustomOverlay
            x:Name="CustomOverlay"
            BackgroundOpacity=".3"
            ContentHorizontalAlignment="Stretch"
            ContentMargin="10"
            ContentVerticalAlignment="Top"
            CurrentResidual="{Binding ElementName=MainGrid, Path=DataContext.CurrentProblem.ObjectiveFunction.CurrentEval, Mode=OneWay}"
            TargetResidual="{Binding ElementName=MainGrid, Path=DataContext.CurrentProblem.TargetResidual, Mode=OneWay}"
            Visibility="Collapsed">
            <e:CustomOverlay.AdditionalContent>
                <Button
                    Margin="10"
                    Click="CancelSolveButton_Click"
                    Content="Stop Solver" />
            </e:CustomOverlay.AdditionalContent>
        </e:CustomOverlay>
    </Grid>
</Window>
